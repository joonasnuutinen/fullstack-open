(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(2),o=t(15),a=t.n(o),u=t(6),i=t(3),l=t(4),d=t.n(l),s="/api/persons",b={getAll:function(){return d.a.get(s).then((function(e){return e.data}))},create:function(e){return d.a.post(s,e).then((function(e){return e.data}))},update:function(e){return d.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(s,"/").concat(e))}},f=function(e){var n=e.label,t=e.value,c=e.onChange;return Object(r.jsxs)("div",{children:[n,":",Object(r.jsx)("input",{value:t,onChange:c})]})},j=function(e){var n=e.onSubmit,t=e.newName,c=e.handleNameChange,o=e.newNumber,a=e.handleNumberChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsx)(f,{label:"name",value:t,onChange:c}),Object(r.jsx)(f,{label:"number",value:o,onChange:a}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.persons,t=e.filter,c=e.removePerson;return Object(r.jsx)("div",{children:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(r.jsx)(m,{person:e,removePerson:c},e.id)}))})},m=function(e){var n=e.person,t=e.removePerson;return Object(r.jsxs)("div",{children:[n.name," ",n.number," ",Object(r.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]})},p=function(e){var n=e.msg;if(null===n)return null;var t={default:"green",error:"red"},c={color:t[n.type]||t.default,padding:10,background:"lightgray",borderStyle:"solid",borderRadius:5,marginBottom:10};return Object(r.jsx)("div",{style:c,children:n.content})},v=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),l=Object(i.a)(a,2),d=l[0],s=l[1],m=Object(c.useState)(""),v=Object(i.a)(m,2),O=v[0],g=v[1],x=Object(c.useState)(""),w=Object(i.a)(x,2),C=w[0],y=w[1],N=Object(c.useState)(null),S=Object(i.a)(N,2),k=S[0],P=S[1];Object(c.useEffect)((function(){b.getAll().then((function(e){o(e)}))}),[]);var A=function(e){P(e),setTimeout((function(){P(null)}),5e3)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(p,{msg:k}),Object(r.jsx)(f,{label:"filter",value:C,onChange:function(e){y(e.target.value)}}),Object(r.jsx)("h2",{children:"Add new"}),Object(r.jsx)(j,{onSubmit:function(e){if(e.preventDefault(),-1===t.map((function(e){return e.name})).indexOf(d)){var n={name:d,number:O};b.create(n).then((function(e){o(t.concat(e)),s(""),g(""),A({content:"Added ".concat(d)})})).catch((function(e){A({type:"error",content:e.response.data.error})}))}else{if(!window.confirm("".concat(d," is already added to phonebook. Replace the old number with a new one?")))return;var r=t.find((function(e){return e.name===d})),c=Object(u.a)(Object(u.a)({},r),{},{number:O});b.update(c).then((function(e){o(t.map((function(n){return n.id===e.id?e:n}))),s(""),g(""),A({content:"Updated ".concat(d)})})).catch((function(){A({type:"error",content:"Information of ".concat(d," has already been removed from the server")}),o(t.filter((function(e){return e.id!==c.id})))}))}},newName:d,handleNameChange:function(e){s(e.target.value)},newNumber:O,handleNumberChange:function(e){g(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(h,{persons:t,filter:C,removePerson:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n,"?"))&&b.remove(e).then((function(){o(t.filter((function(n){return n.id!==e}))),A({content:"Deleted ".concat(n)})}))}})]})};a.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.7b94cd7b.chunk.js.map